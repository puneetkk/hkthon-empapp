<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">


    <title>The Pension App - Annuity- Calculator</title>

    <!-- Bootstrap core CSS -->
    <link href="dist/css/bootstrap.css" rel="stylesheet">
    <!-- Custom styles for this template -->
	 <link href="style.css" rel="stylesheet">
    <link href="style-annuity.css" rel="stylesheet">
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="dist/js/bootstrap.min.js"></script>

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

  </head>

  <body class="container">
 
    <header class="row">
      <div class="col-sm-7 col-lg-8">
        <a href="#" class="logo"><img src="dist/img/logo.png" alt="Pension App" /></a>
      </div>
      <div class="col-sm-5 col-lg-4">
        <div class="col-xs-10 col-md-8">
          <div class="user">
            <span><i class="fa fa-user" aria-hidden="true"></i></span>Carl Lewis
          </div>        
        </div>
        <div class="col-xs-2 col-md-4">
          <a href="#" class="exit"><i class="fa fa-power-off" aria-hidden="true"></i></a>
        </div>
      </div>
      
    </header>
	<div class="clearfix">
	    <div class="col-xs-12">
		    <nav class="row">
		      <div class="col-sm-8">
		        <!-- Breacrumbs -->
		        <ol class="breadcrumb">
		          <li class="breadcrumb-item"><a href="employee-dashboard.html">EMPLOYEE DASHBOARD</a></li>
		          <li class="breadcrumb-item active">My ANNUITY</li>
		        </ol>
		      </div>
		      <div class="col-sm-4">
		        <strong>LAST UPDATED : Today </strong>
		      </div>
		      

		    </nav>
	    </div>
    </div>
    <h1>Annuity- Calculator</h1>

    <div class="page-wrap">
	
    	<div class="row">
			<div class="col-sm-12">
		 
					<section class="p-10">
						<form>
							<div class="row p-t-10">
								<div class="col-sm-3 col-md-2 p-l-sm-0">
									<label class="control-label" for="">Current Age:</label>
								</div>
								<div class="col-sm-8 col-md-6 p-l-0 p-r-60 p-r-sm-0">
									<div class="anuity-box">
									  <input type="number" class="form-control current-age" />
										
									</div> 

								</div>
							</div>
							<div class="row p-t-10">
								<div class="col-sm-3 col-md-2 p-l-sm-0">
									<label class="control-label" for="">Monthly Salary:</label>
								</div>
								<div class="col-sm-8 col-md-6 p-l-0 p-r-60 p-r-sm-0">
									<div class="anuity-box">
									  <input type="number" class="form-control month-sal" value=""/>
										
									</div> 

								</div>
							</div>	
							<div class="row p-t-10">
								<div class="col-sm-3 col-md-2 p-l-sm-0">
									<label class="control-label" for="">Pension Age:</label>
								</div>
								<div class="col-sm-8 col-md-6 p-l-0 p-r-60 p-r-sm-0">
									<div class="anuity-box">
									  <input type="number" class="form-control pension-age" />
										
									</div> 

								</div>
							</div>								
							<div class="row p-t-10">
								<div class="col-sm-3 col-md-2 p-l-sm-0">
									<label class="control-label monthly-pensionpot" for="">Target Pension Pot Monthly:</label>
								</div>
								<div class="col-sm-8 col-md-6 p-l-0 p-r-60 p-r-sm-0">
									<div class="anuity-box">
									  <label class="pension-pot">0</label>
									  
										
									</div> 

								</div>
							</div>
							
							<div class="row p-t-10">
								<div class="col-sm-3 col-md-2 p-l-sm-0">
									<label class="control-label monthly-pensionpot" for="">Target Pension Pot Yearly:</label>
								</div>
								<div class="col-sm-8 col-md-6 p-l-0 p-r-60 p-r-sm-0">
									<div class="anuity-box">
									  <label class="pension-pot-yearly">0</label>
									  
										
									</div> 

								</div>
							</div>							
							<div class="row">
								<div class="col-md-12">
									<div class="row">
										<div class="col-xs-12 text-center m-t-sm-25 m-t-30 p-t-30 border-top-grey">
											<button type="button" class="btn m-lr-3 btn-cal">Calculate</button>
											<button type="button" class="btn m-lr-3 btn-reset">Reset</button>
											
										</div>
									</div>
								</div>
							</div>							
					</form>
						</section>
					</div>
				</div>
				
    	</div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->


<input type="text" id="txt_name"  />

	<script>
	
	(function () {
	//$('.month-sal').val();//($('.month-sal').val()!='undefined') ? $('.month-sal').val() : 200;
	//Variable declarations
	//console.log("hello: "+$('.month-sal').val());
	var monthSal=0;
	var currentAge=37;
	var salHike=7;
	var pensionAge=65;
	var empContri=4;
	var emplyrContri=3;
	var stateContri=1;
	var currentTotalContri;
	var prevTotalCumContri=55094;
	var currentTotalCumContri;
	var prevYrMonthlySal;
	var annuityYrs;
	var Factor;
	var annuityConstant=3471;//For the Demo purpose, we will assume only 1 criteria to arrive at the annuity (highligted in Gree for Age 65)
	var monthlyAnnuity;
	var annualAnnuity;

	//$('.month-sal').val()
		$(".btn-cal").click(function(){
		
			//Reset input values first
			//$('.current-age').val("");
			//$('.pension-age').val("");
			//$('.month-sal').val("");
			
			currentAge=parseFloat($('.current-age').val());
			pensionAge=parseFloat($('.pension-age').val());
			monthSal=parseFloat($('.month-sal').val());
			annuityYrs=parseInt(pensionAge-currentAge);
			console.log("current Age: "+currentAge);
			console.log("current age monthly Salary: "+monthSal);
			console.log("pension  Age: "+pensionAge);
			console.log("Calculate Annuity for next: "+annuityYrs+" Years");
			for (i = 0; i <=annuityYrs; i++) {
				
				if(i==0){
					console.log(i+" current age monthly Salary: "+monthSal);
					prevYrMonthlySal=monthSal;
					console.log(i+" current age employee Contribution:"+empContri+'%= '+(monthSal*empContri/100));
					console.log(i+" current age employer Contribution:"+emplyrContri+'%= '+(monthSal*emplyrContri/100));
					console.log(i+" current age state contribution:"+stateContri+'%= '+(monthSal*stateContri/100));
					currentTotalContri= parseFloat((monthSal*empContri/100)+(monthSal*emplyrContri/100)+(monthSal*stateContri/100));
					console.log(i+" current age Year Total Contribution: "+currentTotalContri);
					console.log(i+" previous Total Cummulative Contribution: "+prevTotalCumContri);
					currentTotalCumContri=prevTotalCumContri+currentTotalContri;
					console.log(i+" current age Year TotalCumulative Contribution: "+currentTotalCumContri);
				}else{
					

					console.log(i+" previous Total Contribution : "+currentTotalContri);
					prevTotalCumContri=currentTotalCumContri;
					prevYrMonthlySal=monthSal;
					console.log(i+" previous Total Cum Contribution : "+currentTotalCumContri);
					console.log(i+" previous year monthly salary: "+prevYrMonthlySal);
					console.log(i+" next year hike: "+salHike+'%= '+monthSal*(salHike/100));
					
					monthSal=prevYrMonthlySal+parseFloat(monthSal*(salHike/100));
					
					console.log(i+" next year monthly salary: "+monthSal);
					//monthSal+=parseFloat(monthSal)*(salHike/100);
					console.log(i+" next year employee Contribution:"+empContri+'%= '+(monthSal*empContri/100));
					console.log(i+" next year employer Contribution:"+emplyrContri+'%= '+(monthSal*emplyrContri/100));
					console.log(i+" next year state contribution:"+stateContri+'%= '+(monthSal*stateContri/100));
					currentTotalContri= parseFloat((monthSal*empContri/100)+(monthSal*emplyrContri/100)+(monthSal*stateContri/100));
					
					console.log(i+" Prev Total Cumm Contribution: "+prevTotalCumContri);
					console.log(i+" next Year Total Contribution: "+currentTotalContri);
					console.log(i+" that Year TotalCumulative Contribution: "+(prevTotalCumContri+currentTotalContri));					
					currentTotalCumContri=prevTotalCumContri+currentTotalContri;
				
					console.log(i+" next year Total cumulative Contribution: (current+ previous)  "+currentTotalCumContri);
					console.log("*****************************");
				}
			prevTotalCumContri=currentTotalContri;
			prevYrMonthlySal=monthSal;
		}
		console.log("Pension Age calculations as below:");
		console.log("pension age monthly Salary: "+monthSal+" pension age Total Contribution: "+currentTotalContri+" pension age Total Cumulative Contribution: "+currentTotalCumContri);
		console.log("*****************************");
		
		Factor=currentTotalCumContri/100000;
		monthlyAnnuity=Math.round(Factor*annuityConstant);
		annualAnnuity=Math.round(monthlyAnnuity*12);
		$(".pension-pot").text(monthlyAnnuity);
		$(".pension-pot-yearly").text(annualAnnuity);
		
		console.log("Factor: "+Factor);
		console.log("monthlyAnnuity: "+monthlyAnnuity);
		console.log("annualAnnuity: "+annualAnnuity);
		});
		//Reset Form
		$(".btn-reset").click(function(){
		
			 monthSal=0;
			 currentAge=37;
			 salHike=3;
			 pensionAge=66;
			 empContri=4;
			 emplyrContri=3;
			 stateContri=1;
			 currentTotalContri=0;
			 prevTotalCumContri=0;
			 currentTotalCumContri=0;
			 prevYrMonthlySal=0;
			 annuityYrs=0;
			 
			 //
			 
			$('.current-age').val("");
			$('.pension-age').val("");
			$('.month-sal').val("");
			$(".pension-pot").text("");
			$(".pension-pot-yearly").text("");
		
		});


}());
	
	
	</script>
	
  </body>
</html>
